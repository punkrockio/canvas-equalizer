/*! canvas-equalizer ~ License: BSD-2-Clause-FreeBSD ~ https://opensource.kantorad.io/canvas-equalizer/ */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CanvasEqualizer=t():e.CanvasEqualizer=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=2)}([function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}function r(e,t,n){var i=t[n];if(void 0!==i&&null!==i){if(s.call(e,n)&&(void 0===e[n]||null===e[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");s.call(e,n)&&o(i)?e[n]=a(Object(e[n]),t[n]):e[n]=i}}function a(e,t){if(e===t)return e;t=Object(t);for(var n in t)s.call(t,n)&&r(e,t,n);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),a=0;a<i.length;a++)u.call(t,i[a])&&r(e,t,i[a]);return e}var o=n(8),s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;e.exports=function(e){e=i(e);for(var t=1;t<arguments.length;t++)a(e,arguments[t]);return e}},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n.n(a),s=n(4),u=n(5),l=n(7),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c={classNamespace:"GE",filterOptions:{},updateFilterOnDrag:!0},_=function(){function e(t,i){var a=this,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,e),this._showZones=!1,this._editZones=!1,this._isActualChannelCurveNeeded=!0,this._currentChannelIndex=0,this._isSameFilterLR=!0,this._drawingMode=0,this._lastDrawX=0,this._lastDrawY=0,this._isRTL=!1,this._formatFrequencyUnit=function(e,t){var n="Hz";return t&&e>=1e3&&(n="k"+n,e/=1e3),a._l10n.format("frequency.format",e,a._l10n.get("frequency.unit."+n))},this._wrappedUpdateFilter=function(){a._filter.updateFilter(!1)},this._btnMnuClick=function(e){e.button||a._toggleMenu()},this._mnuChBLClick=function(e){a._mnuChBClick(e,0)},this._mnuChBRClick=function(e){a._mnuChBClick(e,1)},this._mnuChBClick=function(e,t){e.button||a._isSameFilterLR&&a._currentChannelIndex===t||(a._isSameFilterLR?(a._currentChannelIndex=t,a._filter.channelIndex=-1,a._filter.updateFilter(!0),a._isActualChannelCurveNeeded&&a._filter.updateActualChannelCurve(t),a._drawCurve()):(a._isSameFilterLR=!0,a._filter.copyFilter(t,1-t),a._currentChannelIndex!==t&&(a._currentChannelIndex=t,a._isActualChannelCurveNeeded&&a._filter.updateActualChannelCurve(t),a._drawCurve())),a._checkMenu(a._mnuChBL,0===t),a._checkMenu(a._mnuChBR,1===t))},this._mnuChLClick=function(e){a._mnuChLRClick(e,0)},this._mnuChRClick=function(e){a._mnuChLRClick(e,1)},this._mnuChLRClick=function(e,t){e.button||(a._isSameFilterLR||a._currentChannelIndex!==t)&&(a._isSameFilterLR&&(a._isSameFilterLR=!1,a._filter.channelIndex=1-a._currentChannelIndex,a._filter.updateFilter(!1)),a._currentChannelIndex!==t&&(a._currentChannelIndex=t,a._isActualChannelCurveNeeded&&a._filter.updateActualChannelCurve(t),a._drawCurve()),a._checkMenu(a._mnuChL,0===t),a._checkMenu(a._mnuChR,1===t))},this._mnuShowZonesClick=function(e){e.button||(a._showZones=!a._showZones,a._checkMenu(a._mnuShowZones,a._showZones),a._drawCurve())},this._mnuEditZonesClick=function(e){e.button||(a._editZones=!a._editZones,a._canvas.classList[a._editZones?"add":"remove"](a._options.classNamespace+"CNVZON"),a._checkMenu(a._mnuEditZones,a._editZones))},this._mnuNormalizeCurvesClick=function(e){e.button||(a._filter.isNormalized=!a._filter.isNormalized,a._checkMenu(a._mnuNormalizeCurves,a._filter.isNormalized),a._isActualChannelCurveNeeded&&(a._filter.updateActualChannelCurve(a._currentChannelIndex),a._drawCurve()))},this._mnuShowActualClick=function(e){e.button||(a._isActualChannelCurveNeeded=!a._isActualChannelCurveNeeded,a._checkMenu(a._mnuShowActual,a._isActualChannelCurveNeeded),a._isActualChannelCurveNeeded&&a._filter.updateActualChannelCurve(a._currentChannelIndex),a._drawCurve())},this._btnMnuKeyDown=function(e){n.i(s.a)(e,"ArrowUp","ArrowDown")&&(n.i(s.b)(e),a._toggleMenu(n.i(s.a)(e,"ArrowUp")),window.setTimeout(function(){var e=a._mnu.querySelectorAll("."+a._options.classNamespace+"MNUIT");e[e.length-1].focus()}))},this._mnuKeyDown=function(e){var t=function(e,t){var n=t?"nextSibling":"previousSibling",i=e;do{if((i=i[n])instanceof HTMLButtonElement&&i.classList.contains(a._options.classNamespace+"MNUIT"))return i.focus(),!0}while(i);return!1};if(n.i(s.a)(e,"ArrowUp","ArrowDown")){n.i(s.b)(e);var i=n.i(s.a)(e,"ArrowDown");!t(e.target,i)&&i&&a._btnMnu.focus()}},this._canvasMouseDown=function(e){if(!e.button){if(!a._drawingMode){var t=n.i(s.c)(a._canvas,e),i=t.x,r=t.y,o=Math.floor(i/a._widthRatio()),u=r/a._heightRatio();o>=0&&o<a._filter.options.visibleBinCount&&(a._drawingMode=1,a._editZones?a._filter.changeZoneY(a._currentChannelIndex,o,u):(a._filter.channelCurves[a._currentChannelIndex][o]=a._filter.clampY(u),a._lastDrawX=o,a._lastDrawY=u),a._drawCurve(),a._canvas.setPointerCapture?a._canvas.setPointerCapture(e.pointerId):e.clonedFromTouch||(n.i(s.d)(a._canvas,"move",a._canvasMouseMove),n.i(s.d)(a._canvas,"up",a._canvasMouseUp),n.i(s.e)(document,"move",a._documentMouseMove,!0),n.i(s.e)(document,"up",a._documentMouseUp,!0)))}return n.i(s.b)(e)}return!0},this._canvasMouseUp=function(e){a._drawingMode&&(a._drawingMode=0,a._filter.channelIndex=a._currentChannelIndex,a._filter.updateFilter(!1),a._isActualChannelCurveNeeded&&a._filter.updateActualChannelCurve(a._currentChannelIndex),a._drawCurve(),a._canvas.releasePointerCapture?a._canvas.releasePointerCapture(e.pointerId):e.clonedFromTouch||(n.i(s.d)(document,"move",a._documentMouseMove,!0),n.i(s.d)(document,"up",a._documentMouseUp,!0),n.i(s.e)(a._canvas,"move",a._canvasMouseMove),n.i(s.e)(a._canvas,"up",a._canvasMouseUp)))},this._canvasMouseMove=function(e){var t=a._filter.channelCurves[a._currentChannelIndex],i=n.i(s.c)(a._canvas,e),r=i.x,o=i.y;if(a._drawingMode||r>=0&&r<a._canvas.width&&o>=0&&o<a._canvas.height){var u=Math.floor(r/a._widthRatio()),l=o/a._heightRatio();if(u<0?u=0:u>=a._filter.options.visibleBinCount&&(u=a._filter.options.visibleBinCount-1),a._drawingMode){if(a._editZones)a._filter.changeZoneY(a._currentChannelIndex,u,l);else{if(Math.abs(u-a._lastDrawX)>1){var h=(l-a._lastDrawY)/Math.abs(u-a._lastDrawX),c=u<a._lastDrawX?-1:1;l=a._lastDrawY+h;var _=Math.abs(u-a._lastDrawX)-1;for(u=a._lastDrawX+c;_>0;u+=c,_--)t[u]=a._filter.clampY(l),l+=h}t[u]=a._filter.clampY(l),a._lastDrawX=u,a._lastDrawY=l}a._drawCurve(),a._options.updateFilterOnDrag&&n.i(s.f)(a._wrappedUpdateFilter,150)}else a._isActualChannelCurveNeeded&&(t=a._filter.actualChannelCurve);if(a._setStatusBar(u,l,t[u]),a._drawingMode)return n.i(s.b)(e)}return!0},this._windowResize=function(){a._fixCanvasSize()},this._documentMouseMove=function(e){return a._canvasMouseMove(e)},this._documentMouseUp=function(e){a._canvasMouseUp(e)},this._options=o()({},c,h),this._filter=new u.a(t,i,this._options.filterOptions),this._l10n=new l.a(this._options.language)}return h(e,[{key:"createControl",value:function(e){var t=this;if(!this._ctx){var i=function(e,n){var i=document.createElement("div");return i.className=u+"LBL "+u+"LBL"+e,i.innerHTML=t._l10n.get(n),i},r=function(){var e=document.createElement("div");return e.className=u+"MNUSEP",e.setAttribute("role","separator"),e},a=function(e){var n=document.createElement("div");return n.className=u+"MNULBL",n.textContent=t._l10n.get(e),n},o=function(e,n,i,r){var a=document.createElement("button");if(a.type="button",a.className=u+"MNUIT "+u+"CLK",n){"string"==typeof n?(a.dataset.radioGroup=n,a.setAttribute("role","menuitemradio")):a.setAttribute("role","menuitemcheckbox");var o=document.createElement("span");o.textContent="string"==typeof n?"● ":"■ ",a.appendChild(o),t._checkMenu(a,i)}else a.setAttribute("role","menuitem");return a.appendChild(document.createTextNode(t._l10n.get(e))),r&&a.addEventListener("click",r),a.addEventListener("mouseenter",function(){a.focus()}),a.addEventListener("mouseleave",function(){a.blur()}),a},u=this._options.classNamespace;this._element=e,e.className=u,/\bip(?:[ao]d|hone)\b/i.test(navigator.userAgent)&&!window.MSStream&&e.classList.add(u+"IOS"),"rtl"===getComputedStyle(e).direction&&(e.classList.add("RTL"),this._isRTL=!0),e.addEventListener("contextmenu",s.b),this._stb=document.createElement("div"),this._stb.className=u+"STB",e.appendChild(this._stb),this._canvas=document.createElement("canvas"),this._canvas.className=u+"CNV",n.i(s.e)(this._canvas,"down",this._canvasMouseDown),n.i(s.e)(this._canvas,"move",this._canvasMouseMove),n.i(s.e)(this._canvas,"up",this._canvasMouseUp),this._canvas.addEventListener("contextmenu",s.b),e.appendChild(this._canvas),n.i(s.g)(window,"resize",this._windowResize);var l=this._canvas.getContext("2d");if(!l)throw new Error("Unable to get a 2D context.");this._ctx=l,this._stb.appendChild(this._lblCursor=i("CSR","cursor.label")),this._stb.appendChild(this._lblCurve=i("CRV","curve.label")),this._stb.appendChild(this._lblFrequency=i("FRQ","frequency.label")),this._setStatusBar(0,this._filter.zeroChannelValueY,this._filter.zeroChannelValueY),this._btnMnu=document.createElement("button"),this._btnMnu.type="button",this._btnMnu.className=u+"BTN "+u+"CLK",this._btnMnu.setAttribute("aria-haspopup","true"),this._btnMnu.setAttribute("aria-label",this._l10n.get("menu")),this._btnMnu.addEventListener("click",this._btnMnuClick),this._btnMnu.addEventListener("keydown",this._btnMnuKeyDown),this._btnMnu.addEventListener("mouseenter",function(){t._btnMnu.focus()}),this._btnMnu.addEventListener("mouseleave",function(){t._btnMnu.blur()}),this._stb.appendChild(this._btnMnu),this._mnu=document.createElement("div"),this._mnu.className=u+"MNU",this._mnu.setAttribute("role","menu"),this._mnu.addEventListener("keydown",this._mnuKeyDown),this._mnu.appendChild(a("menu.both")),this._mnu.appendChild(this._mnuChBL=o("menu.both.left","curve",!0,this._mnuChBLClick)),this._mnu.appendChild(this._mnuChBR=o("menu.both.right","curve",!1,this._mnuChBRClick)),this._mnu.appendChild(r()),this._mnu.appendChild(a("menu.one")),this._mnu.appendChild(this._mnuChL=o("menu.one.left","curve",!1,this._mnuChLClick)),this._mnu.appendChild(this._mnuChR=o("menu.one.right","curve",!1,this._mnuChRClick)),this._mnu.appendChild(r()),this._mnu.appendChild(this._mnuShowZones=o("menu.zones",!0,!1,this._mnuShowZonesClick)),this._mnu.appendChild(this._mnuEditZones=o("menu.zoneEdit",!0,!1,this._mnuEditZonesClick)),this._mnu.appendChild(r()),this._mnu.appendChild(this._mnuNormalizeCurves=o("menu.normalizeCurves",!0,!1,this._mnuNormalizeCurvesClick)),this._mnu.appendChild(this._mnuShowActual=o("menu.actualResponse",!0,!0,this._mnuShowActualClick)),this._stb.appendChild(this._mnu),this._toggleMenu(!1),this._fixCanvasSize(),this._drawCurve()}return this._canvas}},{key:"destroyControl",value:function(){this._ctx&&(n.i(s.h)(window,"resize",this._windowResize),delete this._canvas,delete this._lblCursor,delete this._lblCurve,delete this._lblFrequency,delete this._btnMnu,delete this._mnu,delete this._mnuChBL,delete this._mnuChL,delete this._mnuChBR,delete this._mnuChR,delete this._mnuShowZones,delete this._mnuEditZones,delete this._mnuNormalizeCurves,delete this._mnuShowActual,delete this._stb,delete this._ctx,delete this._rangeImage,this._element.innerHTML="",delete this._element,clearTimeout(this._barHideTimeout))}},{key:"reset",value:function(){this._filter.reset(),this._drawCurve()}},{key:"loadLocale",value:function(e,t){this._l10n.loadLocale(e,t)}},{key:"_formatDB",value:function(e){e<-40&&(e=-(1/0));var t=e.toLocaleString(this._l10n.language,{minimumFractionDigits:2,maximumFractionDigits:2});return e<0?t.replace("-","−"):0===e?"−"+t:"+"+t}},{key:"_formatFrequency",value:function(e){var t,n=this;return(t=this._l10n).format.apply(t,["frequency.text"].concat(i(e.map(function(e,t){return n._formatFrequencyUnit(e,!!t)}))))}},{key:"_checkMenu",value:function(e,t){function n(e,t){e&&(e.style.visibility=t?"visible":"hidden",e.setAttribute("aria-checked",t.toString()))}t&&e.dataset.radioGroup&&[].slice.call(this._mnu.querySelectorAll('[data-radio-group="'+e.dataset.radioGroup+'"]')).forEach(function(e){n(e.firstChild,!1)}),n(e.firstChild,t)}},{key:"_drawCurve",value:function(){function e(e){return Math.round(e)+l}var t=this._ctx,n=this._canvas,i=window.devicePixelRatio,r=n.width/i,a=n.height/i,o=this._widthRatio(),s=this._heightRatio(),u=this._filter.options.visibleBinCount-1,l=.5,h=this._filter.channelCurves[this._currentChannelIndex];if(!t)return!1;t.fillStyle="#303030",t.fillRect(0,0,r,a),t.lineWidth=1,t.strokeStyle="#5a5a5a",t.beginPath();var c=r+1+l,_=e(this._filter.zeroChannelValueY*s);for(t.moveTo(c,_);c>0;)t.lineTo(c-4,_),c-=10,t.moveTo(c,_);for(t.stroke(),t.font="bold 10pt Verdana",t.textAlign=this._isRTL?"left":"right",t.fillStyle="#5a5a5a",t.fillText("‎−0dB",this._isRTL?1:r-1,Math.round(this._filter.zeroChannelValueY*s)-2),t.beginPath(),c=r-1-l,_=e(this._filter.options.validYRangeHeight*s),t.moveTo(c,_);c>0;)t.lineTo(c-4,_),c-=10,t.moveTo(c,_);if(t.stroke(),t.fillText("‎−∞dB",this._isRTL?1:r-1,Math.round(this._filter.options.validYRangeHeight*s)-2),this._showZones)for(var d=this._filter.equivalentZonesFrequencyCount.length-2;d>0;d--){for(c=e(this._filter.equivalentZonesFrequencyCount[d]*o),_=0,t.beginPath(),t.moveTo(c,_);_<a;)t.lineTo(c,_+4),_+=10,t.moveTo(c,_);t.stroke()}for(t.strokeStyle=this._isActualChannelCurveNeeded&&!this._drawingMode?"#707070":this._rangeImage,t.beginPath(),t.moveTo(.5,e(h[0]*s)),c=1;c<u;c++)t.lineTo(e(c*o),e(h[c]*s));if(t.lineTo(Math.round(c*o)+1,e(h[c]*s)),t.stroke(),this._isActualChannelCurveNeeded&&!this._drawingMode){for(h=this._filter.actualChannelCurve,t.strokeStyle=this._rangeImage,t.beginPath(),t.moveTo(l,e(h[0]*s)),c=1;c<u;c++)t.lineTo(e(c*o),e(h[c]*s));t.lineTo(Math.round(c*o)+1,e(h[c]*s)),t.stroke()}return!0}},{key:"_widthRatio",value:function(){return this._canvas.width/window.devicePixelRatio/this._filter.options.visibleBinCount}},{key:"_heightRatio",value:function(){var e=this._stb.clientHeight;return(this._canvas.height/window.devicePixelRatio-e-5)/this._filter.options.validYRangeHeight}},{key:"_fixCanvasSize",value:function(){this._canvas.style.display="none";var e=this._element.getBoundingClientRect(),t=window.devicePixelRatio;this._canvas.style.display="",this._canvas.style.width=e.width+"px",this._canvas.style.height=e.height+"px",this._canvas.width=e.width*t,this._canvas.height=e.height*t,this._ctx.setTransform(t,0,0,t,0,0),this._rangeImage=this._ctx.createLinearGradient(0,0,0,e.height-this._stb.clientHeight-5),this._rangeImage.addColorStop(0,"#ff0000"),this._rangeImage.addColorStop(.1875,"#ffff00"),this._rangeImage.addColorStop(.39453125,"#00ff00"),this._rangeImage.addColorStop(.60546875,"#00ffff"),this._rangeImage.addColorStop(.796875,"#0000ff"),this._rangeImage.addColorStop(1,"#ff00ff"),this._drawCurve()}},{key:"_setLabelParam",value:function(e,t){var n=e.querySelector("span");n&&(n.textContent=t)}},{key:"_setStatusBar",value:function(e,t,n){this._setLabelParam(this._lblCursor,this._formatDB(this._filter.yToDB(t))),this._setLabelParam(this._lblCurve,this._formatDB(this._filter.yToDB(n))),this._setLabelParam(this._lblFrequency,this._formatFrequency(this._filter.visibleBinToFrequencyGroup(e)))}},{key:"_toggleMenu",value:function(e){e=void 0===e?"none"===this._mnu.style.display:e,this._mnu.style.display=e?"":"none",this._btnMnu.textContent=e?"▼":"▲"}},{key:"options",get:function(){return o()({},c,this._options)}},{key:"filterLength",get:function(){return this._filter.filterLength},set:function(e){this._filter.filterLength!==e&&(this._filter.filterLength=e,this._isActualChannelCurveNeeded&&this._filter.updateActualChannelCurve(this._currentChannelIndex),this._drawCurve())}},{key:"sampleRate",get:function(){return this._filter.sampleRate},set:function(e){this._filter.sampleRate!==e&&(this._filter.sampleRate=e,this._isActualChannelCurveNeeded&&this._filter.updateActualChannelCurve(this._currentChannelIndex),this._drawCurve())}},{key:"audioContext",get:function(){return this._filter.audioContext},set:function(e){this._filter.audioContext!==e&&(this._filter.audioContext=e)}},{key:"language",get:function(){return this._l10n.language},set:function(e){this._l10n.language=e}},{key:"visibleFrequencies",get:function(){return this._filter.visibleFrequencies}},{key:"convolver",get:function(){return this._filter.convolver}}]),e}();t.default=_},function(e,t,n){"use strict";e.exports=n(1).default},,function(e,t,n){"use strict";function i(e,t,n,i){var a="__"+n+"_wrapper__";return e[a]||(e[a]=[]),r(e,n,i),e[a].push({elem:i,wrapper:t}),t}function r(e,t,n){var i="__"+t+"_wrapper__",r=void 0;return e[i]&&(e[i]=e[i].filter(function(e,t){return e.elem!==n||(r=e.wrapper,!1)})),r}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){var a=n[r];if(Object.keys(m).indexOf(a)!==-1){var o=Array.isArray(m[a])?m[a]:[a,m[a]],s=c(o,2),u=s[0],l=s[1];if(e.key===u||e.keyCode===l)return!0}}return!1}function o(e){return e.preventDefault(),e.stopPropagation(),!1}function s(e,t){if(v.indexOf(e)===-1){v.push(e);var n=function(){e(),v.splice(v.indexOf(e),1)};t?setTimeout(n,t):requestAnimationFrame(n)}}function u(e,t,n,r){var a=!1,o=function(e){a||(a=!0,requestAnimationFrame(function(){n(e),a=!1}))};e.addEventListener(t,i(n,o,"throttle"+t,e),r)}function l(e,t,n,i){e.removeEventListener(t,r(n,"throttle"+t,e),i)}function h(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}n.d(t,"e",function(){return _}),n.d(t,"d",function(){return d}),t.a=a,t.b=o,t.f=s,t.g=u,t.h=l,t.c=h;var c=function(){function e(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(e){function t(t,n){n=n||{bubbles:!1,cancelable:!1};var i=document.createEvent("MouseEvent");return i.initMouseEvent(t,n.bubbles,n.cancelable,e,1,n.screenX,n.screenY,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),i}try{new CustomEvent("test")}catch(e){return}t.prototype=Event.prototype,e.MouseEvent=t}(window);var _=void 0,d=void 0;if(window.PointerEvent)_=function(e,t,n,i){e.addEventListener("pointer"+t,n,i)},d=function(e,t,n,i){e.removeEventListener("pointer"+t,n,i)};else if("ontouchend"in document){var f={down:["start"],move:["move"],up:["end","cancel"]};_=function(e,t,n,r){var a=function(e){var i=e.changedTouches[0],r=new MouseEvent("mouse"+t,{altKey:e.altKey,clientX:i&&i.clientX||0,clientY:i&&i.clientY||0,ctrlKey:e.ctrlKey,metaKey:e.metaKey,screenX:i&&i.screenX||0,screenY:i&&i.screenY||0,shiftKey:e.shiftKey});r.clonedFromTouch=!0;var a=n(r);return(a===!1||r.defaultPrevented)&&o(e),a};f[t].forEach(function(o){e.addEventListener("touch"+o,i(n,a,"touch"+t,e),r)})},d=function(e,t,n,i){f[t].forEach(function(a){e.removeEventListener("touch"+a,r(n,"touch"+t,e),i)})}}else _=function(e,t,n,i){e.addEventListener("mouse"+t,n,i)},d=function(e,t,n,i){e.removeEventListener("mouse"+t,n,i)};var v=[],m={Backspace:8,"\t":["Tab",9],"\n":["Enter",13],Escape:27,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Delete:46}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(0),a=n.n(r),o=n(6),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u={validYRangeHeight:255,visibleBinCount:512},l=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),e._validateFilterLength(t),this._options=a()({},u,r),this._filterLength=t,this._sampleRate=n.sampleRate||44100,this._isNormalized=!1,this._binCount=1+(t>>>1),this._audioContext=n,this._filterKernel=n.createBuffer(2,t,this._sampleRate),this._convolver=n.createConvolver(),this._convolver.normalize=!1,this._convolver.buffer=this._filterKernel,this._tmp=new Float32Array(t),this._channelCurves=[new Int16Array(this._options.visibleBinCount),new Int16Array(this._options.visibleBinCount)],this._actualChannelCurve=new Int16Array(this._options.visibleBinCount),this._channelIndex=-1,this._zeroChannelValueY=this._options.validYRangeHeight>>>1,this._maximumChannelValue=this._options.validYRangeHeight>>>1,this._minimumChannelValue=-(this._options.validYRangeHeight>>>1),this._minusInfiniteChannelValue=-(this._options.validYRangeHeight>>>1)-1,this._maximumChannelValueY=0,this._minimumChannelValueY=this._options.validYRangeHeight-1,this._visibleFrequencies=new Float32Array(this._options.visibleBinCount),this._equivalentZones=new Uint16Array([31,62,125,250,500,1e3,2e3,4e3,8e3,16e3]);var o=[0,9,18,36,71,107,177,249,321,393,512],s=this._options.visibleBinCount/o[o.length-1],l=[5,5,5,5,10,10,20,40,80,89],h=[5,50,95,185,360,720,1420,2860,5740,11498],c=h[0];this._options.visibleBinCount!==o[o.length-1]&&(o=o.map(function(e){return Math.round(e*s)}),l=l.map(function(e){return e/s})),this._equivalentZonesFrequencyCount=new Float32Array(o);for(var _=0,d=0;_<this._options.visibleBinCount;_++)this._visibleFrequencies[_]=c,d!==o.length-1&&d!==h.length-1&&_+1>=o[d+1]?(d++,c=h[d]):c+=l[d];this.reset()}return s(e,[{key:"reset",value:function(){for(var e=this._options.visibleBinCount-1;e>=0;e--)this._channelCurves[0][e]=this._zeroChannelValueY,this._channelCurves[1][e]=this._zeroChannelValueY,this._actualChannelCurve[e]=this._zeroChannelValueY;this.updateFilter(!0),this.updateActualChannelCurve(0)}},{key:"clampY",value:function(e){var t=this._maximumChannelValueY,n=this._minimumChannelValueY;return e<=t?t:e>n?this._options.validYRangeHeight+1:e}},{key:"yToDB",value:function(t){var n=this._maximumChannelValueY,i=this._minimumChannelValueY;return t<=n?40:t>i?-(1/0):e._lerp(n,40,i,-40,t)}},{key:"yToMagnitude",value:function(t){var n=this._maximumChannelValueY,i=this._minimumChannelValueY;return t<=n?100:t>i?0:Math.exp(e._lerp(n,2,i,-2,t)*Math.LN10)}},{key:"magnitudeToY",value:function(e){var t=this._zeroChannelValueY;return e>=100?this._maximumChannelValueY:e<.01?this._options.validYRangeHeight+1:Math.round(t-t*Math.log(e)/Math.LN10*.5-.4)}},{key:"visibleBinToZoneIndex",value:function(e){if(e>=this._options.visibleBinCount-1)return this._equivalentZones.length-1;if(e>0)for(var t=this._equivalentZonesFrequencyCount,n=t.length-1;n>=0;n--)if(e>=t[n])return n;return 0}},{key:"visibleBinToFrequency",value:function(e){var t=this._visibleFrequencies,n=this._options.visibleBinCount;return e>=n-1?t[n-1]:e>0?t[e]:t[0]}},{key:"visibleBinToFrequencyGroup",value:function(e){var t=this._equivalentZones,n=this._visibleFrequencies,i=this._options.visibleBinCount;if(e>=i-1)return[Math.round(n[i-1]),Math.round(t[t.length-1])];if(e>0)for(var r=this._equivalentZonesFrequencyCount,a=r.length-1;a>=0;a--)if(e>=r[a])return[Math.round(n[e]),Math.round(t[a])];return[Math.round(n[0]),Math.round(t[0])]}},{key:"changeZoneY",value:function(e,t,n){var i=this.visibleBinToZoneIndex(t),r=this._equivalentZonesFrequencyCount[i+1],a=this.clampY(n),o=this._channelCurves[e];for(i=this._equivalentZonesFrequencyCount[i];i<r;i++)o[i]=a}},{key:"copyFilter",value:function(e,t){for(var n=this._filterKernel.getChannelData(e),i=this._filterKernel.getChannelData(t),r=this._filterLength-1;r>=0;r--)i[r]=n[r];this._convolver.buffer=this._filterKernel}},{key:"updateFilter",value:function(t){var i=Math.max(this._channelIndex,0),r=i===-1,a=this._filterLength,s=this._channelCurves[i],u=this._options.visibleBinCount,l=this._sampleRate/a,h=a>>>1,c=this._filterKernel.getChannelData(i),_=this._visibleFrequencies,d=.5*Math.PI,f=1,v=Number(this._isNormalized)+1;do{v--;for(var m=1,p=0;;){if(l*m>=_[0])break;var C=this.yToMagnitude(s[0]);c[m<<1]=C*f,m++}for(;l>_[p+1]-_[p]&&m<h&&p<u-1;){var g=l*m,y=0,b=0;do{y+=s[p],b++,p++}while(g>_[p]&&p<u-1);var w=this.yToMagnitude(y/b);c[m<<1]=w*f,m++}for(;m<h;m++){var M=l*m,k=void 0;if(M>=_[u-1])k=this.yToMagnitude(s[u-1]);else{for(;p<u-1&&M>_[p+1];)p++;k=this.yToMagnitude(e._lerp(_[p],s[p],_[p+1],s[p+1],M))}c[m<<1]=k*f}for(c[0]=c[2]>=1?1:c[2],c[1]=c[a-2]>=1?1:c[a-2],m=a-2;m>=2;m-=2){var x=d*(m>>>1);c[m+1]=c[m]*Math.sin(x),c[m]*=Math.cos(x)}n.i(o.a)(c,a,-1),v&&(f=this._applyWindowAndComputeActualMagnitudes(c),f<=0&&(v=0),f=1/f)}while(v);if(r)return void this.copyFilter(i,1-i);if(t){var L=this._channelIndex;return this._channelIndex=1-i,this.updateFilter(!1),void(this._channelIndex=L)}this._convolver.buffer=this._filterKernel}},{key:"updateActualChannelCurve",value:function(t){var n=this._filterLength,i=this._actualChannelCurve,r=this._options.visibleBinCount,a=this._sampleRate/n,o=n>>>1,s=this._tmp,u=this._visibleFrequencies,l=this._filterKernel.getChannelData(t);this._applyWindowAndComputeActualMagnitudes(l);for(var h=0,c=0;c<r-1&&h<o&&a>u[c+1]-u[c];){for(var _=a*h;h<o&&_+a<u[c];)h++,_=a*h;i[c]=this.magnitudeToY(e._lerp(_,s[h],_+a,s[h+1],u[c])),c++}for(h++;h<o&&c<r;){var d=void 0,f=0,v=0;do{f+=s[h],v++,h++,d=a*h}while(d<u[c]&&h<o);i[c]=this.magnitudeToY(f/v),c++}for(h=this._sampleRate>>>1>=u[r-1]?i[c-1]:this._options.validYRangeHeight+1;c<r;c++)i[c]=h}},{key:"_applyWindowAndComputeActualMagnitudes",value:function(e){for(var t=this._filterLength,i=this._tmp,r=t>>>1,a=r,s=2*Math.PI/a,u=a;u>=0;u--)i[u]=e[u]*(.42-.5*Math.cos(s*u)+.08*Math.cos(2*s*u));for(var l=t-1;l>a;l--)i[l]=0;n.i(o.a)(i,t,1);for(var h=i[1],c=i[0]>h?i[0]:h,_=2;_<t;_+=2){var d=i[_],f=i[_+1],v=Math.sqrt(d*d+f*f);i[_>>>1]=v,v>c&&(c=v)}return i[r]=h,c}},{key:"filterLength",get:function(){return this._filterLength},set:function(t){this._filterLength!==t&&(e._validateFilterLength(t),this._filterLength=t,this._binCount=1+(t>>>1),this._filterKernel=this._audioContext.createBuffer(2,t,this._sampleRate),this._tmp=new Float32Array(t),this.updateFilter(!0))}},{key:"sampleRate",get:function(){return this._sampleRate},set:function(e){this.sampleRate!==e&&(this._sampleRate=e,this._filterKernel=this._audioContext.createBuffer(2,this._filterLength,e),this.updateFilter(!0))}},{key:"isNormalized",get:function(){return this._isNormalized},set:function(e){this.isNormalized!==e&&(this._isNormalized=e,this.updateFilter(!0))}},{key:"audioContext",get:function(){return this._audioContext},set:function(e){this.audioContext!==e&&(this._convolver.disconnect(0),this._audioContext=e,this._filterKernel=e.createBuffer(2,this._filterLength,this._sampleRate),this._convolver=e.createConvolver(),this._convolver.normalize=!1,this._convolver.buffer=this._filterKernel,this.updateFilter(!0))}},{key:"options",get:function(){return a()({},u,this._options)}},{key:"visibleFrequencies",get:function(){return this._visibleFrequencies}},{key:"channelCurves",get:function(){return this._channelCurves.slice()}},{key:"actualChannelCurve",get:function(){return this._actualChannelCurve}},{key:"convolver",get:function(){return this._convolver}},{key:"channelIndex",get:function(){return this._channelIndex},set:function(e){this._channelIndex=e}},{key:"zeroChannelValueY",get:function(){return this._zeroChannelValueY}},{key:"equivalentZonesFrequencyCount",get:function(){return this._equivalentZonesFrequencyCount}}],[{key:"_validateFilterLength",value:function(e){if(e<8||e&e-1)throw new Error("The FFT size must be power of 2 and not less than 8.")}},{key:"_lerp",value:function(e,t,n,i,r){return(r-e)*(i-t)/(n-e)+t}}]),e}();t.a=l},function(e,t,n){"use strict";function i(e,t,n){var i=t<<1,r=void 0,a=void 0,o=1,s=void 0,u=void 0,l=void 0,h=void 0,c=void 0,_=void 0,d=void 0,f=void 0,v=void 0,m=void 0,p=void 0,C=void 0;for(u=1;u<i;u+=2){for(o>u&&(f=e[o-1],e[o-1]=e[u-1],e[u-1]=f,f=e[o],e[o]=e[u],e[u]=f),a=t;a>=2&&o>a;)o-=a,a>>>=1;o+=a}for(u=1;u<=i;u+=4)o=u+2,f=e[o-1],v=e[o],e[o-1]=e[u-1]-f,e[o]=e[u]-v,e[u-1]+=f,e[u]+=v;for(r=4,d=n*Math.PI*.5;i>r;){for(s=r<<1,c=Math.sin(d),d*=.5,h=Math.sin(d),h*=-2*h,u=1;u<=i;u+=s)o=u+r,f=e[o-1],v=e[o],e[o-1]=e[u-1]-f,e[o]=e[u]-v,e[u-1]+=f,e[u]+=v;for(l=1+h,_=c,m=1+(r>>>1),a=3;a<m;a+=2){for(u=a;u<=i;u+=s)o=u+r,f=l*(p=e[o-1])-_*(C=e[o]),v=l*C+_*p,e[o-1]=e[u-1]-f,e[o]=e[u]-v,e[u-1]+=f,e[u]+=v;l+=(f=l)*h-_*c,_+=_*h+f*c}if(1===n){for(u=a;u<=i;u+=s)o=u+r,f=-e[o],v=e[o-1],e[o-1]=e[u-1]-f,e[o]=e[u]-v,e[u-1]+=f,e[u]+=v;l=-c,_=1+h}else{for(u=a;u<=i;u+=s)o=u+r,f=e[o],v=-e[o-1],e[o-1]=e[u-1]-f,e[o]=e[u]-v,e[u-1]+=f,e[u]+=v;l=c,_=-1-h}for(a+=2;a<r;a+=2){for(u=a;u<=i;u+=s)o=u+r,f=l*(p=e[o-1])-_*(C=e[o]),v=l*C+_*p,e[o-1]=e[u-1]-f,e[o]=e[u]-v,e[u-1]+=f,e[u]+=v;l+=(f=l)*h-_*c,_+=_*h+f*c}r=s}}function r(e,t,n){var r=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,h=void 0,c=void 0,_=void 0,d=t>>>2,f=void 0,v=void 0,m=void 0,p=void 0,C=void 0,g=void 0,y=void 0,b=void 0,w=void 0,M=Math.PI/(t>>>1);for(1===n?(f=-.5,i(e,t>>>1,1)):(f=.5,M=-M),b=Math.sin(.5*M),g=1+(b*=-2*b),y=w=Math.sin(M),r=1;r<d;r++)o=1+(a=r<<1),u=1+(s=t-a),v=.5*((l=e[a])+(c=e[s])),m=.5*((h=e[o])-(_=e[u])),p=-f*(h+_),C=f*(l-c),e[a]=v+(l=g*p)-(h=y*C),e[o]=m+(c=g*C)+(_=y*p),e[s]=v-l+h,e[u]=c+_-m,g+=(v=g)*b-y*w,y+=y*b+v*w;if(1===n)e[0]=(v=e[0])+e[1],e[1]=v-e[1];else for(e[0]=.5*((v=e[0])+e[1]),e[1]=.5*(v-e[1]),i(e,t>>>1,-1),v=2/t,r=t-1;r>=0;r--)e[r]*=v}t.a=r},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(9),a=n.n(r),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s="en",u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;i(this,e),this._locales={},this._language=t,this.loadLocale(s,a.a)}return o(e,[{key:"loadLocale",value:function(e,t){this._locales[e]=t}},{key:"get",value:function(e){var t=this._locales[this._language]||this._locales[s];return void 0===t[e]&&(t=this._locales[s]),t[e]}},{key:"format",value:function(e){var t=this;e=this.get(e);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach(function(n,i){e=e.replace(new RegExp("\\{"+i+"\\}","g"),n.toLocaleString(t._language))}),e}},{key:"language",get:function(){return this._language},set:function(e){this._language=e}}]),e}();t.a=u},function(e,t,n){"use strict";e.exports=function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}},function(e,t){e.exports={"cursor.label":"Cursor: <span></span> dB","curve.label":"Curve: <span></span> dB","frequency.label":"Frequency: <span></span>","frequency.text":"{0} ({1})","frequency.format":"{0} {1}","frequency.unit.Hz":"Hz","frequency.unit.kHz":"kHz",menu:"Options","menu.both":"Same curve for both channels","menu.both.left":"Use left curve","menu.both.right":"Use right curve","menu.one":"One curve for each channel","menu.one.left":"Show left curve","menu.one.right":"Show right curve","menu.zones":"Show zones","menu.zoneEdit":"Edit by zones","menu.normalizeCurves":"Normalize curves","menu.actualResponse":"Show actual response"}}])});
//# sourceMappingURL=CanvasEqualizer.min.js.map